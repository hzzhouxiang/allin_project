<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd" >
<mapper namespace="com.aowin.dao.UserMapper">
	<!-- 添加用户信息 -->
	<insert id="addUser" parameterType="com.aowin.model.User">
		insert into allin_user
		(password,userphone)
		values (#{password},#{userphone})
	</insert>
	
	<!-- count为1则返回true，0返回false  查看该手机是否已存在-->
	<select id="havePhone" parameterType="string" resultType="boolean">
        select count(userid) from allin_user where userphone = #{userphone}
    </select> 
    
    <!-- 用户登录  传入参数:0电话号码，1密码 -->
    <select id="userLogin"  resultType="boolean">
    	select count(*) from allin_user where userphone = #{0} and password=#{1}
    </select>
    
    <!-- 根据电话号码查询用户信息，返回USER类 -->
    <select id="userMsg" parameterType="string" resultType="com.aowin.model.User">
    	select * from allin_user where userphone=#{userphone}
    </select>
    
    <!-- 修改（更新）用户信息 -->
    <update id="modifyuserMsg" parameterType="string">
    	UPDATE allin_user SET username=#{username},gender=#{gender},usergameid=#{usergameid},useridcard=#{useridcard},userrole=#{userrole} WHERE userphone=#{userphone}
    </update>
</mapper>
